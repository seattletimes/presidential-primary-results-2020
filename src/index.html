<% 
  results = json.results.races[0].results[0] 
%><!doctype html>
<html lang="en-US">
  <head>
    <%= t.include("partials/_head.html", grunt.data.json) %>
    <% if (json.project.production && !json.project.embedded) { %>
      <%= t.include("partials/_dataLayer.html") %>
      <%= t.include("partials/_gtm.html") %>
    <% } %>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <% if (json.project.production && !json.project.embedded) { %>
      <%= t.include("partials/_gtmNoScript.html") %>
    <% } %>
    <responsive-child>
      <main class="interactive">
        <h1>Presidential primary results</h1>
        <p class="note note--timestamp">Last updated TK:00 p.m.</p>
        <div class="flexbox">
          <div id="map">
            <%= t.include("assets/countyMap.svg") %>
          </div>
          <div id="results">
            <h2>Washington state</h2>
            <p class="note note--precincts"><%= results.reportingPercentage %>% of precincts reporting</p>
            <ul class="candidates">
              <% json.candidates.forEach(function(candidate) { %>
                <% if (candidate.show === true) { %>
                  <li><span class="color-block <%= candidate.last %>"></span><%= candidate.first %> <%= candidate.last %>: <%= results.candidates.find(c => c.last === candidate.last).percentage %>%</li>
                <% } %>
              <% }); %>
            </ul>
          </div>
        </div>
        <div class="caption">
          <p class="data-source">Source: Associated Press</p>
          <p class="art-credit">Hilary Fung / The Seattle Times</p>
        </div>
      </main>
    </responsive-child>

    <script src="app.js" async></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_analytics.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
